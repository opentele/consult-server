create table appointment_token (id  serial not null, created_date timestamp default (now()):: timestamp without time zone not null, inactive boolean default false not null, last_modified_date timestamp default (now()):: timestamp without time zone not null, uuid uuid default uuid_generate_v4() not null, queue_number int4 not null, organisation_id integer not null, appointment_provider_id integer not null, client_id integer not null, consultation_id integer null, consultation_room_id integer not null, primary key (id));
create table appointment_token_user (id  serial not null, created_date timestamp default (now()):: timestamp without time zone not null, inactive boolean default false not null, last_modified_date timestamp default (now()):: timestamp without time zone not null, uuid uuid default uuid_generate_v4() not null, organisation_id integer not null, appointment_token_id integer not null, user_id integer not null, primary key (id));
create table client (id  serial not null, created_date timestamp default (now()):: timestamp without time zone not null, inactive boolean default false not null, last_modified_date timestamp default (now()):: timestamp without time zone not null, uuid uuid default uuid_generate_v4() not null, date_of_birth date not null, gender varchar(100) not null, name varchar(255), registration_number varchar(100), organisation_id integer not null, primary key (id));
create table consultant_room_schedule_user (id  serial not null, created_date timestamp default (now()):: timestamp without time zone not null, inactive boolean default false not null, last_modified_date timestamp default (now()):: timestamp without time zone not null, uuid uuid default uuid_generate_v4() not null, organisation_id integer not null, consultation_room_schedule_id integer not null, user_id integer not null, primary key (id));
create table consultant_room_user (id  serial not null, created_date timestamp default (now()):: timestamp without time zone not null, inactive boolean default false not null, last_modified_date timestamp default (now()):: timestamp without time zone not null, uuid uuid default uuid_generate_v4() not null, organisation_id integer not null, consultation_room_id integer not null, user_id integer not null, primary key (id));
create table consultation (id  serial not null, created_date timestamp default (now()):: timestamp without time zone not null, inactive boolean default false not null, last_modified_date timestamp default (now()):: timestamp without time zone not null, uuid uuid default uuid_generate_v4() not null, organisation_id integer not null, appointment_token_id integer null, primary key (id));
create table consultation_room (id  serial not null, created_date timestamp default (now()):: timestamp without time zone not null, inactive boolean default false not null, last_modified_date timestamp default (now()):: timestamp without time zone not null, uuid uuid default uuid_generate_v4() not null, current_queue_number int4, end_time time, scheduled_end_time time not null, scheduled_on date not null, scheduled_start_time time not null, start_time time, title varchar(255) not null, total_slots int4, organisation_id integer not null, consultation_room_schedule_id integer not null, primary key (id));
create table consultation_room_schedule (id  serial not null, created_date timestamp default (now()):: timestamp without time zone not null, inactive boolean default false not null, last_modified_date timestamp default (now()):: timestamp without time zone not null, uuid uuid default uuid_generate_v4() not null, end_time time not null, recurrence_rule varchar(255) not null, start_date date not null, start_time time not null, title varchar(255) not null, total_slots int4 check (total_slots > 0) not null, organisation_id integer not null, primary key (id));
create table consultation_session_record (id  serial not null, created_date timestamp default (now()):: timestamp without time zone not null, inactive boolean default false not null, last_modified_date timestamp default (now()):: timestamp without time zone not null, uuid uuid default uuid_generate_v4() not null, complaints varchar(10000) not null, key_inference varchar(10000) not null, observations varchar(10000) not null, recommendations varchar(10000) not null, organisation_id integer not null, client_id integer not null, primary key (id));
create table organisation (id  serial not null, created_date timestamp default (now()):: timestamp without time zone not null, inactive boolean default false not null, last_modified_date timestamp default (now()):: timestamp without time zone not null, uuid uuid default uuid_generate_v4() not null, name varchar(255) not null, primary key (id));
create table organisation_user (id  serial not null, created_date timestamp default (now()):: timestamp without time zone not null, inactive boolean default false not null, last_modified_date timestamp default (now()):: timestamp without time zone not null, uuid uuid default uuid_generate_v4() not null, provider_type varchar(255) not null, user_type varchar(255) not null, organisation_id integer not null, user_id integer not null, primary key (id));
create table password_reset_token (id  serial not null, created_date timestamp default (now()):: timestamp without time zone not null, inactive boolean default false not null, last_modified_date timestamp default (now()):: timestamp without time zone not null, uuid uuid default uuid_generate_v4() not null, expiry_date timestamp not null, token varchar(255) not null, user_id int4 not null, primary key (id));
create table privilege (id  serial not null, created_date timestamp default (now()):: timestamp without time zone not null, inactive boolean default false not null, last_modified_date timestamp default (now()):: timestamp without time zone not null, uuid uuid default uuid_generate_v4() not null, name varchar(255) not null, primary key (id));
create table role (id  serial not null, created_date timestamp default (now()):: timestamp without time zone not null, inactive boolean default false not null, last_modified_date timestamp default (now()):: timestamp without time zone not null, uuid uuid default uuid_generate_v4() not null, name varchar(255) not null, primary key (id));
create table role_privilege (role_id int4 not null, privilege_id int4 not null, primary key (role_id, privilege_id));
create table users (id  serial not null, created_date timestamp default (now()):: timestamp without time zone not null, inactive boolean default false not null, last_modified_date timestamp default (now()):: timestamp without time zone not null, uuid uuid default uuid_generate_v4() not null, email varchar(255), mobile varchar(255), name varchar(255) not null, password varchar(255) not null, primary key (id));
alter table if exists appointment_token add constraint UKlorwqhcqwdvxrqg95wxal7a4q unique (consultation_room_id, client_id);
alter table if exists appointment_token add constraint UK_e2f8j58y990i7v4s5hjsknaq5 unique (uuid);
alter table if exists appointment_token_user add constraint UK_fppi91fveeb6dbuiwi2apids9 unique (uuid);
alter table if exists client add constraint UK_ffov2uk8f9qvop5b4nvt9hgvw unique (uuid);
alter table if exists consultant_room_schedule_user add constraint UK_p0w0vcgsmrnm2xtk3u9pxlb9f unique (uuid);
alter table if exists consultant_room_user add constraint UK_dwlq6qt8m7ebih9f5gev268bi unique (uuid);
alter table if exists consultation add constraint UK_g5j68qd6m5yvuqqeuoq7mknxv unique (uuid);
alter table if exists consultation_room add constraint UK_s1ghvv4d4p4h80jbm4q8qa1kc unique (uuid);
alter table if exists consultation_room_schedule add constraint UK_am9e1jc133umpuu0mjrx2p4ht unique (uuid);
alter table if exists consultation_session_record add constraint UK_p4k8glsc30w3orw1kxibhabe4 unique (uuid);
alter table if exists organisation add constraint UK_a0spar1od6i2qp7n3b3l0ug5y unique (uuid);
alter table if exists organisation_user add constraint UK_e20k00juxw43g38hd3b7x1tbj unique (uuid);
alter table if exists password_reset_token add constraint UK_b83nimwg75cdko9pp1lkdp892 unique (uuid);
alter table if exists privilege add constraint UK_hkkbq0189qlql9ss5srnoltsa unique (uuid);
alter table if exists role add constraint UK_k5dwya5n8n7y3m2opvmm7qjcc unique (uuid);
alter table if exists users add constraint UK_6km2m9i3vjuy36rnvkgj1l61s unique (uuid);
alter table if exists appointment_token add constraint FKvlofalr5d0acac9nx9jykb02 foreign key (organisation_id) references organisation;
alter table if exists appointment_token add constraint FKq5x34hg43vs167xe2anb1hxf9 foreign key (appointment_provider_id) references users;
alter table if exists appointment_token add constraint FK2e6vpk4dpyaswjvs4kx3brism foreign key (client_id) references client;
alter table if exists appointment_token add constraint FKffnvy25is058euws6dh0p112r foreign key (consultation_id) references consultation;
alter table if exists appointment_token add constraint FKbefsw5o3f2e7m0ph7bkhf2p9j foreign key (consultation_room_id) references consultation_room;
alter table if exists appointment_token_user add constraint FKgwniueec99o50f4g5mmhvvpe2 foreign key (organisation_id) references organisation;
alter table if exists appointment_token_user add constraint FKbsuhkulijimysfv7kvn2r9059 foreign key (appointment_token_id) references appointment_token;
alter table if exists appointment_token_user add constraint FKl4t0ffm3th5ftmcmxgntpp5tj foreign key (user_id) references users;
alter table if exists client add constraint FK1i6inmxcixwq8mgfaxgwekb3o foreign key (organisation_id) references organisation;
alter table if exists consultant_room_schedule_user add constraint FKbac6if4bto6t2v504f1aq8810 foreign key (organisation_id) references organisation;
alter table if exists consultant_room_schedule_user add constraint FKbg6hbc6rim7huutxh1fq83k9i foreign key (consultation_room_schedule_id) references consultation_room_schedule;
alter table if exists consultant_room_schedule_user add constraint FKrtmbngcifdb50kj1mrb2qplgm foreign key (user_id) references users;
alter table if exists consultant_room_user add constraint FKt3j67y94utyln6ny1g66rnbuq foreign key (organisation_id) references organisation;
alter table if exists consultant_room_user add constraint FK137xov2h8qa2meo6dltnxffei foreign key (consultation_room_id) references consultation_room;
alter table if exists consultant_room_user add constraint FK4f3cb2gr35vuttutuqflpk92s foreign key (user_id) references users;
alter table if exists consultation add constraint FKn2tel9xq78m3im4rk8q1ctmu6 foreign key (organisation_id) references organisation;
alter table if exists consultation add constraint FKstq6y9uluay9t7jwjw97yb8co foreign key (appointment_token_id) references appointment_token;
alter table if exists consultation_room add constraint FKjgd2c02r4yt05fleyks5xnarl foreign key (organisation_id) references organisation;
alter table if exists consultation_room add constraint FKbj047k3hvvph780mm330pftvj foreign key (consultation_room_schedule_id) references consultation_room_schedule;
alter table if exists consultation_room_schedule add constraint FK2e81g5rxre4sc0g1f2riexf4b foreign key (organisation_id) references organisation;
alter table if exists consultation_session_record add constraint FKdpd21xoryns1gp2keq1va8sn2 foreign key (organisation_id) references organisation;
alter table if exists consultation_session_record add constraint FKr53twvc2exo5cn8vwy1x0awg2 foreign key (client_id) references client;
alter table if exists organisation_user add constraint FK12a6wyngshovcjge1cvn4d6jn foreign key (organisation_id) references organisation;
alter table if exists organisation_user add constraint FK7cwghb79m4el4t15bvk77k9j0 foreign key (user_id) references users;
alter table if exists password_reset_token add constraint FK83nsrttkwkb6ym0anu051mtxn foreign key (user_id) references users;
alter table if exists role_privilege add constraint FKdkwbrwb5r8h74m1v7dqmhp99c foreign key (privilege_id) references privilege;
alter table if exists role_privilege add constraint FKsykrtrdngu5iexmbti7lu9xa foreign key (role_id) references role;
